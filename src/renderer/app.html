<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';" />
    <title>ReysilvaGen</title>
    
    <!-- CSS Assets - Modular Structure -->
    <link rel="stylesheet" href="assets/css/variables.css" />
    <link rel="stylesheet" href="assets/css/base.css" />
    <link rel="stylesheet" href="assets/css/layout.css" />
    <link rel="stylesheet" href="assets/css/components.css" />
    <link rel="stylesheet" href="assets/css/admin.css" />
    <link rel="stylesheet" href="assets/css/utilities.css" />
    <link rel="stylesheet" href="assets/css/animations.css" />
    <link rel="stylesheet" href="assets/css/responsive.css" />
  </head>
  <body>
    <!-- Application Container -->
    <div id="app-container">
      <!-- Main App Layout -->
      <div id="main-app" style="display: none; width: 100%; height: 100vh">
        <div id="sidebar-container"></div>
        <div class="main-container">
          <main class="main-content" id="main-content-container"></main>
          <div id="footer-container"></div>
        </div>
      </div>

      <!-- Admin App Layout -->
      <div id="admin-app" style="display: none; width: 100%; height: 100vh">
        <div id="admin-login-container"></div>
        <div class="admin-container" id="admin-panel" style="display: none">
          <div id="admin-sidebar-container"></div>
          <div class="main-container">
            <main class="main-content" id="admin-main-content"></main>
          </div>
        </div>
        <div id="admin-modals-container"></div>
      </div>

      <!-- Global Components -->
      <div id="loading-overlay-container"></div>
    </div>

    <!-- MVC Application Bootstrap -->
    <script src="core/bootstrap.js"></script>
    <script>
      // Application Configuration
      const AppConfig = {
        mode: window.location.hash === "#admin" ? "admin" : "main",
        title: {
          main: "ReysilvaGen - Card Generator",
          admin: "Admin Panel - ReysilvaGen"
        }
      };

      // Initialize Application
      document.addEventListener("DOMContentLoaded", () => {
        // Set document title
        document.title = AppConfig.title[AppConfig.mode];
        
        // Show appropriate layout
        if (AppConfig.mode === "admin") {
          document.getElementById("admin-app").style.display = "block";
        } else {
          document.getElementById("main-app").style.display = "flex";
        }
        
        // Initialize MVC Application
        if (window.AppBootstrap) {
          AppBootstrap.init(AppConfig.mode);
        } else {
          console.error("❌ AppBootstrap not available");
        }
      });

      // Navigation Functions
      window.goToAdmin = () => {
        window.location.hash = "#admin";
        window.location.reload();
      };

      window.goToMain = () => {
        window.location.hash = "";
        window.location.reload();
      };
    </script>
  </body>
</html>
